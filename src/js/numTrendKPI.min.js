!function(t){t.widget("inneractive.NumTrendKPI",{options:{title:"",data:{value:0,trend:"",symbol:""},footer:"",height:148,width:230,showDecimalPoint:!0,maxValueForSize:1e5,clickHandler:null,containerStyleClass:"num-trend-kpi-container",headerStyleClass:"kpi-title",headerTextStyleClass:"kpi-title-text",valueStyleClass:"num-trend-kpi-data-text",trendUpStyleClass:"kpi-trend-up",trendDownStyleClass:"kpi-trend-down",trendFlatStyleClass:"kpi-trend-flat",footerStyleClass:"num-trend-kpi-footer",footerTextStyleClass:"kpi-footer-text"},_create:function(){var e=this,i=this.options.height/4,s=i/2,a=(this.options.height-i-s,""),o="function"==typeof e.options.clickHandler?"pointer":"",n=t("<div/>",{height:this.options.height+"px","class":this.options.containerStyleClass}),l=t("<div/>",{html:'<div class="'+this.options.headerTextStyleClass+'" style="height:'+i+"px;cursor:"+a+';">'+this.options.title+"</div>","class":this.options.headerStyleClass,height:i}),r=this._createDataDiv(o).click(function(){"function"==typeof e.options.clickHandler&&e.options.clickHandler.apply()}),d=t("<div/>",{html:'<div class="'+this.options.footerTextStyleClass+'">'+this.options.footer+"</div>","class":this.options.footerStyleClass,height:s});n.append(l).append(r).append(d),this.element.append(n)},_createDataDiv:function(e){var i=this.options.height/4,s=i/2,a=this.options.height-i-s,o=this.options.data.value,n=o;try{n=o%1!=0&&this.options.showDecimalPoint?parseFloat(o).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):parseInt(o).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(l){}var r='<div style="display:inline-table;height:'+a+"px;cursor:"+e+'">';if(r+=o>=this.options.maxValueForSize?'<div class="'+this.options.valueStyleClass+' num-trend-kpi-data-text-small">':'<div class="'+this.options.valueStyleClass+'">',r+=(""!=this.options.data.symbol?this.options.data.symbol:"")+n,r+="</div>",""!=this.options.data.trend){var d=this.options.trendFlatStyleClass;"down"==this.options.data.trend?d=this.options.trendDownStyleClass:"flat"==this.options.data.trend?d=this.options.trendFlatStyleClass:"up"==this.options.data.trend&&(d=this.options.trendUpStyleClass);var h=a/5*4;r+='<div class="'+d+'" style="height:'+h+'px;"  />'}r+="</div>";var p=t("<div/>",{html:r,"class":"kpi-data num-trend-kpi-data",height:a,style:"cursor: "+e+";"});return p},setData:function(e){this.options.data=e;var i=this._createDataDiv();this.element.find(t(".num-trend-kpi-data")).remove(),this.element.find(t("."+this.options.headerStyleClass)).after(i)},getData:function(){return this.options.data}})}(jQuery);